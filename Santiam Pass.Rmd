---
title: "Santiam Pass"
author: "Winston"
date: "October 31, 2014"
output: html_document
---

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.


```{r "clean"}

dim(hwy20_df)
##Get tweets with Santiam Pass
hwy20_Santiam <-hwy20_df[grep("Santiam Pass Summit", hwy20_df$text),]

hwy20_SantiamCrash <-hwy20_Santiam[grep("crash", hwy20_Santiam$text),]

##dedup the data

hwy20_SantiamCrash<-hwy20_SantiamCrash[!duplicated(hwy20_SantiamCrash$created),]

hwy20_SantiamCrash$text<-substring(hwy20_SantiamCrash$text,6,12)

dim(hwy20_SantiamCrash)



```

```{r "plot_the_data"}


##timeline(hwy20_SantiamCrash)

rangeYM<- c(hwy20_SantiamCrash$created[length(hwy20_SantiamCrash$created)], hwy20_SantiamCrash$created[1])

rangeYM

plot(NA,ylim=c(-1,1),xlim=rangeYM,ann=FALSE,axes=FALSE)
abline(h=0,lwd=2,col="#5B7FA3")

ypts <- rep_len(c(-1,1), length.out=nrow(hwy20_SantiamCrash))
txtpts <- rep_len(c(1,3), length.out=nrow(hwy20_SantiamCrash))
ylblpts <- rep_len(c(-.9,.9, -.7, .7, -.5, .5), length.out=nrow(hwy20_SantiamCrash))
lblpts <- rep_len(c(3,1), length.out=nrow(hwy20_SantiamCrash))
segments(hwy20_SantiamCrash$created,0,hwy20_SantiamCrash$created,ypts,col="gray80")

axis.Date(
 1,
 at=seq.Date(rangeYM[1],rangeYM[2],by="month"),
 format="%Y-%m",
 cex.axis=0.6,
 pos=0,
 lwd=0,
 lwd.tick=2,
 col="#5B7FA3",
 font=2
)

points(hwy20_SantiamCrash$created,y=ypts, pch="-", cex=1.5, col="#5B7FA3")
par(xpd=NA)
text(
  hwy20_SantiamCrash$created, y=ylblpts,
  labels=hwy20_SantiamCrash$text, cex=0.5, pos=lblpts, srt=90
)
par(xpd=FALSE)




When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r}
summary(cars)
```

You can also embed plots, for example:

```{r, echo=FALSE}
plot(cars)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
